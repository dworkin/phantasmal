<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>DGD and LPC: call_touch()</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="../../phantasmal.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="95%" border="0" cellspacing="0" cellpadding="4">
  <tr>
    <td colspan="2"> <table width="100%" border="0" cellspacing="1"
        cellpadding="0" class="main">
        <tr>
          <td class="banner">The DGD Driver</td>
        </tr>
      </table></td>
  </tr>
  <tr>
    <td valign="top">
      <table width="25%"  border="0" cellspacing="1"
             cellpadding="0"  class="main">
        <tr>
          <td class="content" style="font-size: 120%">

          <ul style="margin: 0; padding-left: 10%">
            <li> <a href="../index.html">DGD &amp; LPC Page</a> </li>
	    <li> <a href="../LPC">LPC Textbook</a> </li>
	    <li> <a href="../Book/html/">New LPC Introduction</a> </li>
          </ul>

        </td>
        </tr>
        <tr>
          <td class="content" align="center">
            <a href="http://validator.w3.org/check/referer">
            <img src="../../images/valid-xhtml10.gif" alt="Valid XHTML 1.0!"
             style="border:0;width:88px;height:31px" /></a><br />
            <img src="../../images/pixel.gif"
             style="border:0;width:88px;height:1px" alt="" /><br />
            <a href="http://jigsaw.w3.org/css-validator/check/referer">
            <img src="http://jigsaw.w3.org/css-validator/images/vcss"
             alt="Valid CSS!" style="border:0;width:88px;height:31px" />
            </a><br /><br /><br />
            <a href="http://sourceforge.net">
            <img src="http://sourceforge.net/sflogo.php?group_id=48659&amp;type=2"
             style="border: 0; width: 125; height: 37;"
	     alt="SourceForge.net Logo" /></a>
          </td>
        </tr>
      </table></td>
    <td> <table width="100%"  border="0" cellspacing="1" cellpadding="0" 
          class="main">
        <tr>
          <td class="heading">&nbsp;&nbsp;&middot;&nbsp;
	    <a href="http://phantasmal.sf.net/DGD">DGD Page</a> &gt;
            <a href="">call_touch()</a>
          </td>
        </tr>
        <tr>
          <td class="content">
  

  <h3> Using call_touch() </h3>

<pre>
From: dgd at list.imaginary.com (Felix A. Croes)
Date: Thu Jan  1 11:14:01 2004
Subject: [DGD] call_touch

The new kfun call_touch() is primarily intended to simplify maintenance
for persistent muds.  When upgrading the program of an object, often the
dataspace of the object has to be changed as well.  Patching the object
and all of its clones can be a time-consuming and memory-intensive
operation.  Using call_touch(), upgrading the object's dataspace can be
postponed until just before a function is actually called in the object.

call_touch() works by having a function in the driver object called just
before the object is "touched" by a normal function call, similar to
how the creator function is called to initialize the object.  It is
possible to entirely prevent function calls to the object by causing an
error there:

    int touch(object obj, string function)
    {
	call_touch(obj);	/* re-mark the object */
	error("Forbidden");
    }

call_touch() is potentially as dangerous as shadows are in LPmud, because
it can interrupt or inject code into call_other() chains that ought not to
be meddled with.  Unlike shadows, however, what happens can be controlled
for each call individually, and in DGD it is easier to determine which
call chains should not be disturbed.

Regards,
Dworkin
</pre>

<hr />

<pre>
From: dgd at list.imaginary.com (Felix A. Croes)
Date: Fri Jan  2 18:23:01 2004
Subject: [DGD] 1.2.69

diff -c dgd/src/Changelog:1.306 dgd/src/Changelog:1.307
*** dgd/src/Changelog:1.306     Wed Dec 31 03:58:59 2003
--- dgd/src/Changelog   Sat Jan  3 01:12:28 2004
***************
*** 1553,1555 ****
--- 1553,1556 ----
   - New config file parameter: dump_interval, the expected time between two
     statedumps.  Rebuilding the swapfile is paced to this interval.
   - New kfun: call_touch().
+  - call_touch() now also works on light-weight objects.

ftp://ftp.dworkin.nl/pub/dgd/experimental/patches/1.2.68-1.2.69.gz

Regards,
Dworkin
</pre>

  <p style="text-size: 150%"> <a href="index.html"> Back to LPC &amp; DGD
      Page
    </a> </p>
            <address>
            <span><a href="mailto:angelbob-remove-spamfree@spamfree.users.sf.net">Noah Gibbs</a></span>
            </address></td>
        </tr>
      </table></td>
  </tr>
</table>
</body>
</html>
