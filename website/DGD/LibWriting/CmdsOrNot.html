<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>DGD and LPC: &frasl;cmd vs wiztool</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="../../phantasmal.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="95%" border="0" cellspacing="0" cellpadding="4">
  <tr>
    <td colspan="2"> <table width="100%" border="0" cellspacing="1"
        cellpadding="0" class="main">
        <tr>
          <td class="banner">The DGD Driver</td>
        </tr>
      </table></td>
  </tr>
  <tr>
    <td valign="top">
      <table width="25%"  border="0" cellspacing="1"
             cellpadding="0"  class="main">
        <tr>
          <td class="content" style="font-size: 120%">

          <ul style="margin: 0; padding-left: 10%">
            <li> <a href="../index.html">DGD &amp; LPC Page</a> </li>
	    <li> <a href="../LPC">LPC Textbook</a> </li>
	    <li> <a href="../Book/html">New LPC Introduction</a> </li>
          </ul>

        </td>
        </tr>
        <tr>
          <td class="content" align="center">
            <a href="http://validator.w3.org/check/referer">
            <img src="../../images/valid-xhtml10.gif" alt="Valid XHTML 1.0!"
             style="border:0;width:88px;height:31px" /></a><br />
            <img src="../../images/pixel.gif"
             style="border:0;width:88px;height:1px" alt="" /><br />
            <a href="http://jigsaw.w3.org/css-validator/check/referer">
            <img src="http://jigsaw.w3.org/css-validator/images/vcss"
             alt="Valid CSS!" style="border:0;width:88px;height:31px" />
            </a><br /><br /><br />
            <a href="http://sourceforge.net">
            <img src="http://sourceforge.net/sflogo.php?group_id=48659&amp;type=2"
             style="border: 0; width: 125; height: 37;"
	     alt="SourceForge.net Logo" /></a>
          </td>
        </tr>
      </table></td>
    <td> <table width="100%"  border="0" cellspacing="1" cellpadding="0" 
          class="main">
        <tr>
          <td class="heading">&nbsp;&nbsp;&middot;&nbsp;
	    <a href="http://phantasmal.sf.net/DGD">DGD Page</a> &gt;
	    <a href="http://phantasmal.sf.net/DGD/LibWriting">MUDLibs</a> &gt;
            <a href="">&frasl;cmd vs wiztool</a>
          </td>
        </tr>
        <tr>
          <td class="content">
  

  <h2> Should Your MUD Library Use &frasl;cmd or a Wiztool? </h2>

  <p>
    There are two common ways of adding commands to DGD programs.  One
    is to have a directory of objects, traditionally called
    &frasl;cmd, and add text commands to it by adding LPC files, each
    with the same name as the command they will implement.  The other
    is to have a single object, often called a Wiztool, which takes
    the input and executes an appropriate command based on it.
  </p>

  <p>
    There are also a few hybrid approaches, such as the Skotos
    verb&frasl;action approach.  Each action has an associated grammar
    in Skotos' parser, which resolves to a structure like <tt>[
    &quot;attack&quot;, &lt;Bobo#7&gt;, &lt;sword#317&gt; ]</tt>.
    There, each action would presumably have a &frasl;cmd-style LPC
    object to execute the action.  However, the verbs add to a single
    central grammar, which parses and dispatches them wiztool-style.
  </p>

  <h3> Advantages of the Wiztool model </h3>

  <p>
    In the kernel library, each player with wizard-level access has
    his or her own wiztool, with its own privileges.
    &frasl;kernel&frasl;lib&frasl;wiztool masks all functions that are
    relevant to security, so that any inheriting object only has the
    level of access appropriate for the owner of that object.
  </p>

  <p>
    As a result, command security is handled by only three objects:
    &frasl;kernel&frasl;sys&frasl;driver,
    &frasl;kernel&frasl;lib&frasl;auto and
    &frasl;kernel&frasl;lib&frasl;wiztool.  This reduces the number of
    locations where security problems can occur to a very small
    number.
  </p>

  <p>
    The wiztool model allows commands with similar functionality to
    share code easily.  It also makes it easy to see what commands use
    what variables and functions.  This can aid debugging and security
    auditing.
  </p>

  <p>
    The Kernel Library prevents any object from ever changing its
    owner once it is created.  This allows a wiztool to be sure on
    whose behalf it acts, and prevents security problems.
  </p>

  <h3> Problems with the Wiztool model </h3>

  <p>
    By storing a lot of functionality in a small number of files, the
    wiztool model may make it more likely that an error will cause
    more problems.  Storing all commands in user.c may cause problems
    in logging in if it disrupts some vital part of user
    functionality, for instance.
  </p>

  <h3> Advantages of the &frasl;cmds model </h3>

  <p>
    The &frasl;cmds model has the aesthetic appeal of putting
    different commands' code in different files, which can be a large
    maintenance improvement.  It can also make it possible for only
    certain admins to edit certain commands, rather than all commands
    being necessarily ultra-high-security.
  </p>

  <p>
    The &frasl;cmds model is already familiar to a lot of LPMUD
    programmers.  They generally have more trouble adapting to the
    Wiztool model.  The Diku model, while different from both Wiztool
    and &frasl;cmds models, is more similar to the &frasl;smds model.
  </p>

  <h3> Problems with the &frasl;cmds model </h3>

  <p>
    There is a peculiarity in the &frasl;cmds model: the commands are
    not just in separate files, but they are even in separate
    instantiated <i>LPC objects</i>.  This has been known to lead to
    security problems.  Shared command objects require a high access
    level.  They may have this always, or they may acquire a specific
    player's privileges for each command; each of these methods has
    its problems.
  </p>

<pre>
From: DGD Mailing List (Stephen Schmidt)
Date: Mon Mar  8 19:24:00 2004
Subject: [DGD] Couple of questions

On Mon, 8 Mar 2004, William Bryan wrote:
> 1)       Is there a benefit to keeping all commands in the wiztool vice
> breaking them out into a typical /cmd directory structure.

As Noah said, both have advantages, and it is about even. It depends
mostly on what you're used to. I like /cmd because I'm used to it,
but also because when commands go through master objects rather
than wiztool clones, it's a little easier to update one command
at a time. Also, if you're like me and you make a lot of errors,
then it might be better to have only one command go casters-up
when you screw up than to break the wiztool. Security can be a
little chancy with command bins because commands like "delete"
and "nuke" typically have fairly high privilege levels and you
have to protect them against inappropiate calls. Wiztools have
the same problem in concept but becaue each wiztool is associated
with one wizards (assuing you do it that way) it's a bit easier
to protect them. Or so I'm told - I haven't used wiztools.

Steve
</pre>

  <p style="text-size: 150%"> <a href="../index.html"> Back to top level
    </a> </p>
            <address>
            <span><a href="mailto:angelbob-remove-spamfree@spamfree.users.sf.net">Noah Gibbs</a></span>
            </address></td>
        </tr>
      </table></td>
  </tr>
</table>
</body>
</html>
