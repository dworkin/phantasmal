<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>DGD and LPC: LWOs and Swapping</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="../../phantasmal.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="95%" border="0" cellspacing="0" cellpadding="4">
  <tr>
    <td colspan="2"> <table width="100%" border="0" cellspacing="1"
        cellpadding="0" class="main">
        <tr>
          <td class="banner">The DGD Driver</td>
        </tr>
      </table></td>
  </tr>
  <tr>
    <td valign="top">
      <table width="25%"  border="0" cellspacing="1"
             cellpadding="0"  class="main">
        <tr>
          <td class="content" style="font-size: 120%">

          <ul style="margin: 0; padding-left: 10%">
            <li> <a href="../index.html">DGD &amp; LPC Page</a> </li>
	    <li> <a href="../LPC">LPC Textbook</a> </li>
	    <li> <a href="../Book/html">New LPC Introduction</a> </li>
          </ul>

        </td>
        </tr>
        <tr>
          <td class="content" align="center">
            <a href="http://validator.w3.org/check/referer">
            <img src="../../images/valid-xhtml10.gif" alt="Valid XHTML 1.0!"
             style="border:0;width:88px;height:31px" /></a><br />
            <img src="../../images/pixel.gif"
             style="border:0;width:88px;height:1px" alt="" /><br />
            <a href="http://jigsaw.w3.org/css-validator/check/referer">
            <img src="http://jigsaw.w3.org/css-validator/images/vcss"
             alt="Valid CSS!" style="border:0;width:88px;height:31px" />
            </a><br /><br /><br />
            <a href="http://sourceforge.net">
            <img src="http://sourceforge.net/sflogo.php?group_id=48659&amp;type=2"
             style="border: 0; width: 125; height: 37;"
	     alt="SourceForge.net Logo" /></a>
          </td>
        </tr>
      </table></td>
    <td> <table width="100%"  border="0" cellspacing="1" cellpadding="0" 
          class="main">
        <tr>
          <td class="heading">&nbsp;&nbsp;&middot;&nbsp;
	    <a href="http://phantasmal.sf.net/DGD">DGD Page</a> &gt;
	    <a href="http://phantasmal.sf.net/DGD/LibWriting">MUDLibs</a> &gt;
            <a href="">LWOs and Swapping</a>
          </td>
        </tr>
        <tr>
          <td class="content">
  

  <h2> Using Regular DGD Objects and LWOs &mdash; Swapping Behavior </h2>

  <p>
    Before dealing specifically with LWOs, make sure you understand
    DGD's <a href="Swapping.html">normal swapping behavior</a>.
  </p>

  <p>
    An LWO is an object whcih is 'embedded' in another DGD object.
    Regular DGD objects swap as usual, but an LWO swaps as part of
    another object's data.  When the LWO's 'parent' object (not in an
    inheritance sense, but in the sense of whose data space contains
    references to it) is swapped out, so is the LWO.  The LWO doesn't
    get its own sectors in the swapfile.  Instead, the LWO is part of
    the space taken up by its host object.
  </p>

  <p>
    Like an array or mapping, an LWO is copied if an object (other
    than its host object) has a reference to it at the end of a thread
    of execution.  That is, the LWO is referenced by more than one
    regular DGD object for <i>no longer</i> than one thread of
    execution.  After that, it is copied.  Be careful passing
    references to LWOs around for this reason &mdash; you don't want
    duplicate copies, which are large, wasteful and may cause data
    inconsistencies.
  </p>

  <p>
    Like arrays or mappings, LWOs are garbage collected, so when the
    last reference to them disappears, so do they.  This is true even
    in circular structures.  LWOs may not be explicitly destructed.
  </p>

  <p>
    LWOs cannot be used as an editor, user or parser object, nor can
    they have callouts.  It is not clear (to me, right this second)
    whether a parse_string() call in an LWO will store its generated
    automaton cache in the LWO or the host heavyweight DGD object.  If
    the master object of an LWO is destructed, the LWO is destroyed as
    well, along with all others created from that master object.
  </p>

  <p>
    If you've been looking for structures in DGD, LWOs fill roughly
    that need.
  </p>

  <p style="text-size: 150%"> <a href="../index.html"> Back to top level
    </a> </p>
            <address>
            <span><a href="mailto:angelbob-remove-spamfree@spamfree.users.sf.net">Noah Gibbs</a></span>
            </address></td>
        </tr>
      </table></td>
  </tr>
</table>
</body>
</html>
