BASE=$(wildcard *.base.html)
HTML=$(patsubst %.base.html,%.html,$(BASE))
HF=pagefooter.html pageheader.html
DIRS_RMAKE=$(patsubst %,%_make,$(DIRS))
DIRS_RCLEAN=$(patsubst %,%_clean,$(DIRS))

rhtml: html msubdirs
rclean: clean csubdirs

html: $(HTML)

msubdirs: $(DIRS_RMAKE)
csubdirs: $(DIRS_RCLEAN)

$(DIRS_RMAKE): 
	$(MAKE) rhtml -C $(patsubst %_make,%,$@)
$(DIRS_RCLEAN): 
	$(MAKE) rclean -C $(patsubst %_clean,%,$@)

.PHONY: html clean $(DIRS_RMAKE) $(DIRS_RCLEAN)

clean:
	rm -f $(HTML)

$(HTML): %.html: %.base.html $(HF)
	$(PAGEGEN)
